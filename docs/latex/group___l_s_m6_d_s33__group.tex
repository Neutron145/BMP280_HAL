\doxysection{LSM6\+DS33}
\hypertarget{group___l_s_m6_d_s33__group}{}\label{group___l_s_m6_d_s33__group}\index{LSM6DS33@{LSM6DS33}}


Модуль для акселерометра и гироскопа LSM6\+DS33.  


\doxysubsubsection*{Группы}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___o_d_r}{Частота обновления измерений}}
\begin{DoxyCompactList}\small\item\em Значения битов ODR в регистре CTRL1. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___o_r_i_e_n_t}{Порядок расположения осей системы координат}}
\begin{DoxyCompactList}\small\item\em Значения битов Orient\+\_\+2, Orient\+\_\+1 и Orient\+\_\+0 в регистре ORIENT\+\_\+\+CFG\+\_\+G. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___o_r_i_e_n_t___s_i_g_n}{Направления осей системы координат}}
\begin{DoxyCompactList}\small\item\em Значения битов Sign\+X\+\_\+G, Sign\+Y\+\_\+G и Sign\+Z\+\_\+G в регистре ORIENT\+\_\+\+CFG\+\_\+G. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___g_y_r_o___h_p_f}{Фильтр high-\/pass frequency для гироскопа}}
\begin{DoxyCompactList}\small\item\em Значения битов HPFC\+\_\+G (частота фильтра) и HPF\+\_\+\+G\+\_\+E (включен или выключен фильтр) регистра CTRL7\+\_\+G. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___a___f_i_l_t_e_r}{Фильтр high-\/pass frequency для акселерометра}}
\begin{DoxyCompactList}\small\item\em Значения HPCF\+\_\+\+XL регистра CTRL8\+\_\+\+XL. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m5_d_s33___f_u_l_l___s_c_a_l_e___a}{Full-\/scale для акселерометра}}
\begin{DoxyCompactList}\small\item\em Значения битов FS\+\_\+\+XL регистра CTRL1\+\_\+\+XL. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m6_d_s33___f_u_l_l___s_c_a_l_e___g}{Full-\/scale для гироскопа}}
\begin{DoxyCompactList}\small\item\em Значения битов FS\+\_\+G регистра CTRL2\+\_\+G. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group___l_s_m5_d_s33___r_e_g___a_d_r}{Адреса регистров датчика}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Структуры данных}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_l_s_m6_d_s33__cfg}{LSM6\+DS33\+\_\+cfg}}
\begin{DoxyCompactList}\small\item\em Конфигурация датчика \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group___l_s_m6_d_s33__group_ga415bb1b151fd1870acbab5731fd47993}\label{group___l_s_m6_d_s33__group_ga415bb1b151fd1870acbab5731fd47993} 
\#define {\bfseries SA0}
\begin{DoxyCompactList}\small\item\em Закомментируйте, если на пине SA0 выставлен RESET. \end{DoxyCompactList}\item 
\Hypertarget{group___l_s_m6_d_s33__group_gac79226a581b7187435514634557688c7}\label{group___l_s_m6_d_s33__group_gac79226a581b7187435514634557688c7} 
\#define {\bfseries LSM6\+DS33\+\_\+\+ADDRESS}~0x\+D7
\begin{DoxyCompactList}\small\item\em Адрес датчика при низком уровне пина SA0. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___l_s_m6_d_s33__group_gae6b392cec4944416801eabf7f95d13b2}{\+\_\+\+\_\+\+LSM6\+DS33\+\_\+modify\+\_\+reg}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}reg\+\_\+data, uint8\+\_\+t mask, uint8\+\_\+t bits)
\begin{DoxyCompactList}\small\item\em Вспомогательная функция для изменения бита в байте \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga65f8d51906bfa63994613f24fe265bbc}{LSM6\+DS33\+\_\+init}} (I2\+C\+\_\+\+Handle\+Type\+Def hi2c\+\_\+)
\begin{DoxyCompactList}\small\item\em Инициализация датчика LSM6\+DS33. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gab790d028306b8e65cb6bd0fea470488d}{LSM6\+DS33\+\_\+config\+\_\+orientation}} (uint8\+\_\+t orient, uint8\+\_\+t signs)
\begin{DoxyCompactList}\small\item\em Конфигурация ориентации датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gafa5498ca334e09daeff33bbe17cc1849}{LSM6\+DS33\+\_\+config\+\_\+filters}} (uint8\+\_\+t g\+\_\+\+HPF, uint8\+\_\+t g\+\_\+\+HPF\+\_\+frequency, uint8\+\_\+t a\+\_\+\+HPF)
\begin{DoxyCompactList}\small\item\em Конфигурация HPF фильтров акселерометра и гироскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gac340e8eb67ec4c3935ac5f9d21702689}{LSM6\+DS33\+\_\+config\+\_\+full\+\_\+scale}} (uint8\+\_\+t a\+\_\+\+FS, uint8\+\_\+t g\+\_\+\+FS)
\begin{DoxyCompactList}\small\item\em Конфигурация full-\/scale для гироскопа и акселерометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga68e56747e6553e229a8bb64a2adeae7d}{LSM6\+DS33\+\_\+config\+\_\+perfomance\+\_\+mode}} (uint8\+\_\+t a\+\_\+\+ODR, uint8\+\_\+t g\+\_\+\+ODR)
\begin{DoxyCompactList}\small\item\em Конфигурация режима работы датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga0c2dbc5fb28f8dfb76e5b1597b579941}{LSM6\+DS33\+\_\+reset}} ()
\begin{DoxyCompactList}\small\item\em Програмнная перезагрузка датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gac3a6604c07a62dda0c338d382a0209cd}{LSM6\+DS33\+\_\+\+A\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga7f266a11c1106c6c7774e961ad3ddcd8}{LSM6\+DS33\+\_\+\+G\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}g)
\begin{DoxyCompactList}\small\item\em Снятие измерений гироскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga42146df5bea93f539fe623653f301fab}{LSM6\+DS33\+\_\+\+T\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}t)
\begin{DoxyCompactList}\small\item\em Снятие измерений термометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gabb8047f0a55832252a0d0ef41f748fd6}{LSM6\+DS33\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a, float \texorpdfstring{$\ast$}{*}g)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра и гирокскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga11b009252026358585a88ddcf0703794}{LSM6\+DS33\+\_\+get\+\_\+all\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a, float \texorpdfstring{$\ast$}{*}g, float \texorpdfstring{$\ast$}{*}t)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра, гирокскопа и термометра \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Переменные}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group___l_s_m6_d_s33__group_gad8ece5c33c7bd6df846292f7bc2c7259}\label{group___l_s_m6_d_s33__group_gad8ece5c33c7bd6df846292f7bc2c7259} 
I2\+C\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*} {\bfseries LSM6\+DS33\+\_\+hi2c}
\begin{DoxyCompactList}\small\item\em Экземпляр I2C, к которому подключен датчиик влажности. Тип экземпляра зависит от библиотеки. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga3e9d93f01df7b25d2b02c252ec86b739}{FULL\+\_\+\+SCALES\+\_\+A}} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Хранит значения full-\/scale для акселерометра. Упрощает перевод из попугаев в слонов \end{DoxyCompactList}\item 
\Hypertarget{group___l_s_m6_d_s33__group_ga1ea42d8000b5a0cc3f34da582e385d9c}\label{group___l_s_m6_d_s33__group_ga1ea42d8000b5a0cc3f34da582e385d9c} 
uint16\+\_\+t {\bfseries FULL\+\_\+\+SCALES\+\_\+G} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Хранит значения full-\/scale для гироскопа. Упрощает перевод из попугаев в слонов \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Макрос определения используемой библиотеки}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group___l_s_m6_d_s33__group_gab1283ad2405b1eb694ac6fb35b807e30}\label{group___l_s_m6_d_s33__group_gab1283ad2405b1eb694ac6fb35b807e30} 
\#define {\bfseries LSM6\+DS33\+\_\+\+HAL}
\begin{DoxyCompactList}\small\item\em Указывает библиотеку STM32, с помощью которой управляется интерфейс I2C. Определите {\bfseries{LSM6\+DS33\+\_\+\+HAL}} или {\bfseries{LSM6\+DS33\+\_\+\+LL}} в зависимости от используемой библиотеки. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Модуль для акселерометра и гироскопа LSM6\+DS33. 

Модуль позволяет конфигурировать датчик, снимать измерения гироскопа и акселерометра, программно сбрасывать датчик. ~\newline
 Модуль работает с библиотеками LL и HAL. Для выбора библиотеки необходимо использовать макрос и при использовании LL добавить в проект модуль I2C LL. ~\newline
 Перед измерением данных необходимо инициализировать датчик, сконфигурировать его, после чего можно снимать измерения. Пример работы с датчиком\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ a[3];}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ g[3];}
\DoxyCodeLine{\textcolor{keywordtype}{float}\ t;\ \ }
\DoxyCodeLine{\mbox{\hyperlink{group___l_s_m6_d_s33__group_ga65f8d51906bfa63994613f24fe265bbc}{LSM6DS33\_init}}(hi2c1);}
\DoxyCodeLine{\mbox{\hyperlink{group___l_s_m6_d_s33__group_ga11b009252026358585a88ddcf0703794}{LSM6DS33\_get\_all\_measure}}(a,\ g,\ \&t);\ \ \ }
\DoxyCodeLine{\}\ \ }

\end{DoxyCode}
~\newline
 

\doxysubsection{Функции}
\Hypertarget{group___l_s_m6_d_s33__group_gae6b392cec4944416801eabf7f95d13b2}\label{group___l_s_m6_d_s33__group_gae6b392cec4944416801eabf7f95d13b2} 
\index{LSM6DS33@{LSM6DS33}!\_\_LSM6DS33\_modify\_reg@{\_\_LSM6DS33\_modify\_reg}}
\index{\_\_LSM6DS33\_modify\_reg@{\_\_LSM6DS33\_modify\_reg}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{\_\_LSM6DS33\_modify\_reg()}{\_\_LSM6DS33\_modify\_reg()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+\+LSM6\+DS33\+\_\+modify\+\_\+reg (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{reg\+\_\+data,  }\item[{uint8\+\_\+t}]{mask,  }\item[{uint8\+\_\+t}]{bits }\end{DoxyParamCaption})}



Вспомогательная функция для изменения бита в байте 

Используется для модификации регистров датчика, используя маску бита и новое значение 
\begin{DoxyParams}{Аргументы}
{\em reg\+\_\+data} & Значение регистра \\
\hline
{\em mask} & Маска изменяемого бита \\
\hline
{\em bits} & Новое значение бита \\
\hline
\end{DoxyParams}
Обнуляем бит, который должны изменить, с помощью маски

Присваиваем обнуленному биту новое значение\Hypertarget{group___l_s_m6_d_s33__group_gac3a6604c07a62dda0c338d382a0209cd}\label{group___l_s_m6_d_s33__group_gac3a6604c07a62dda0c338d382a0209cd} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_A\_get\_measure@{LSM6DS33\_A\_get\_measure}}
\index{LSM6DS33\_A\_get\_measure@{LSM6DS33\_A\_get\_measure}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_A\_get\_measure()}{LSM6DS33\_A\_get\_measure()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+\+A\+\_\+get\+\_\+measure (\begin{DoxyParamCaption}\item[{float \texorpdfstring{$\ast$}{*}}]{a }\end{DoxyParamCaption})}



Снятие измерений акселерометра 

Измерения получаются путем считывания значений из 6 регистров, начиная с OUTX\+\_\+\+L\+\_\+\+XL, и преобразованием значений АЦП в мс/c. 
\begin{DoxyParams}{Аргументы}
{\em a} & Массив, куда записываются значения ускорений по трем осям \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после снятия измерений. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Сохраняем в массив uint16\+\_\+t. Таким образом избегаем объединения uint8\+\_\+t в uint16\+\_\+t

Необходимо умножить считанное значение с АЦП на установленный full\+\_\+scale. Для этого используем массивы\Hypertarget{group___l_s_m6_d_s33__group_gafa5498ca334e09daeff33bbe17cc1849}\label{group___l_s_m6_d_s33__group_gafa5498ca334e09daeff33bbe17cc1849} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_config\_filters@{LSM6DS33\_config\_filters}}
\index{LSM6DS33\_config\_filters@{LSM6DS33\_config\_filters}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_config\_filters()}{LSM6DS33\_config\_filters()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+config\+\_\+filters (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{g\+\_\+\+HPF,  }\item[{uint8\+\_\+t}]{g\+\_\+\+HPF\+\_\+frequency,  }\item[{uint8\+\_\+t}]{a\+\_\+\+HPF }\end{DoxyParamCaption})}



Конфигурация HPF фильтров акселерометра и гироскопа 

Конфигурируется через бит HPCF\+\_\+\+XL в регистре CRTL8\+\_\+\+XL и биты HPCF\+\_\+G, HP\+\_\+\+G\+\_\+\+EN в регистре CTRL7\+\_\+G 
\begin{DoxyParams}{Аргументы}
{\em g\+\_\+\+HPF} & Режим работы фильтра HPF для гироскопа. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___g_y_r_o___h_p_f}{режима работы фильтра}. \\
\hline
{\em g\+\_\+\+HPF\+\_\+frequency} & Частота фильтра HPF для гироскопа. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___g_y_r_o___h_p_f}{частоты фильтра для гироскопа}. \\
\hline
{\em a\+\_\+\+HPF} & Частота и режим работы HPF для акселерометра. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___a___f_i_l_t_e_r}{фильтра high-\/pass frequency для акселерометра}. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после конфигурации фильтров датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Изменяем значения соответствующих битов в значении регистра структуры и записываем в регистр устройства\Hypertarget{group___l_s_m6_d_s33__group_gac340e8eb67ec4c3935ac5f9d21702689}\label{group___l_s_m6_d_s33__group_gac340e8eb67ec4c3935ac5f9d21702689} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_config\_full\_scale@{LSM6DS33\_config\_full\_scale}}
\index{LSM6DS33\_config\_full\_scale@{LSM6DS33\_config\_full\_scale}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_config\_full\_scale()}{LSM6DS33\_config\_full\_scale()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+config\+\_\+full\+\_\+scale (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+\_\+\+FS,  }\item[{uint8\+\_\+t}]{g\+\_\+\+FS }\end{DoxyParamCaption})}



Конфигурация full-\/scale для гироскопа и акселерометра 

Конфигурируется через бит FS\+\_\+\+XL регистра CTRL1\+\_\+\+XL и бит FS\+\_\+G регистра CTRL2\+\_\+G 
\begin{DoxyParams}{Аргументы}
{\em a\+\_\+\+FS} & Full-\/scale для акселерометра. Принимает значения марокосов \doxylink{group___l_s_m5_d_s33___f_u_l_l___s_c_a_l_e___a}{full-\/scale для акселерометра}. \\
\hline
{\em g\+\_\+\+FS} & Full-\/scale для гироскопа. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___f_u_l_l___s_c_a_l_e___g}{full-\/scale Для гироскопа}. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после конфигурации full scale датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Проверка на корректность введенных значений

Изменяем значения соответствующих битов в значении регистра структуры и записываем в регистр устройства\Hypertarget{group___l_s_m6_d_s33__group_gab790d028306b8e65cb6bd0fea470488d}\label{group___l_s_m6_d_s33__group_gab790d028306b8e65cb6bd0fea470488d} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_config\_orientation@{LSM6DS33\_config\_orientation}}
\index{LSM6DS33\_config\_orientation@{LSM6DS33\_config\_orientation}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_config\_orientation()}{LSM6DS33\_config\_orientation()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+config\+\_\+orientation (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{orient,  }\item[{uint8\+\_\+t}]{signs }\end{DoxyParamCaption})}



Конфигурация ориентации датчика 

Конфигурируется регистр ORIENT\+\_\+\+CFG\+\_\+G. Определяется порядок расположения осей системы координат и их знаки 
\begin{DoxyParams}{Аргументы}
{\em orient} & Порядок расположение осей системы координат. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___o_r_i_e_n_t}{порядка расположения осей системы координат}. \\
\hline
{\em signs} & Знаки осей в системе координат. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___o_r_i_e_n_t___s_i_g_n}{направлений осей системы координат}. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после конфигурации ориентации датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Проверка на корректность введенных значений

Изменяем значение соответствующего бита в значении регистра структуры и записываем в регистр устройства\Hypertarget{group___l_s_m6_d_s33__group_ga68e56747e6553e229a8bb64a2adeae7d}\label{group___l_s_m6_d_s33__group_ga68e56747e6553e229a8bb64a2adeae7d} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_config\_perfomance\_mode@{LSM6DS33\_config\_perfomance\_mode}}
\index{LSM6DS33\_config\_perfomance\_mode@{LSM6DS33\_config\_perfomance\_mode}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_config\_perfomance\_mode()}{LSM6DS33\_config\_perfomance\_mode()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+config\+\_\+perfomance\+\_\+mode (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{a\+\_\+\+ODR,  }\item[{uint8\+\_\+t}]{g\+\_\+\+ODR }\end{DoxyParamCaption})}



Конфигурация режима работы датчика 

Конфигурируется через бит ODR\+\_\+\+XL регистра CTRL1\+\_\+\+XL и бит ODR\+\_\+G регистра CTRL2\+\_\+G. Позволяет включать или выключать гироскопа и акселерометра и задавать частоту их работы. Акселерометр и гироскоп работают независимо друг от друга, каждый на своих частотах. 
\begin{DoxyParams}{Аргументы}
{\em a\+\_\+\+ODR} & Частота работы акселерометра. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___o_d_r}{частоты и питания датчика}. \\
\hline
{\em g\+\_\+\+ODR} & Частота работы гироскопа. Принимает значения макросов \doxylink{group___l_s_m6_d_s33___o_d_r}{частоты и питания датчика}. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после конфигурации режима работы датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Проверка на корректность введенных значений

Изменяем значения соответствующих битов в значении регистра структуры и записываем в регистр устройства\Hypertarget{group___l_s_m6_d_s33__group_ga7f266a11c1106c6c7774e961ad3ddcd8}\label{group___l_s_m6_d_s33__group_ga7f266a11c1106c6c7774e961ad3ddcd8} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_G\_get\_measure@{LSM6DS33\_G\_get\_measure}}
\index{LSM6DS33\_G\_get\_measure@{LSM6DS33\_G\_get\_measure}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_G\_get\_measure()}{LSM6DS33\_G\_get\_measure()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+\+G\+\_\+get\+\_\+measure (\begin{DoxyParamCaption}\item[{float \texorpdfstring{$\ast$}{*}}]{g }\end{DoxyParamCaption})}



Снятие измерений гироскопа 

Измерения получаются путем считывания значений из 6 регистров, начиная с OUTX\+\_\+\+L\+\_\+G, и преобразованием значениий АЦП в градусы. 
\begin{DoxyParams}{Аргументы}
{\em g} & Массив, куда записываются значений угла отклонения по трем осям \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после снятия измерений. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Сохраняем в массив uint16\+\_\+t. Таким образом избегаем объединения uint8\+\_\+t в uint16\+\_\+t\Hypertarget{group___l_s_m6_d_s33__group_ga11b009252026358585a88ddcf0703794}\label{group___l_s_m6_d_s33__group_ga11b009252026358585a88ddcf0703794} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_get\_all\_measure@{LSM6DS33\_get\_all\_measure}}
\index{LSM6DS33\_get\_all\_measure@{LSM6DS33\_get\_all\_measure}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_get\_all\_measure()}{LSM6DS33\_get\_all\_measure()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+get\+\_\+all\+\_\+measure (\begin{DoxyParamCaption}\item[{float \texorpdfstring{$\ast$}{*}}]{a,  }\item[{float \texorpdfstring{$\ast$}{*}}]{g,  }\item[{float \texorpdfstring{$\ast$}{*}}]{t }\end{DoxyParamCaption})}



Снятие измерений акселерометра, гирокскопа и термометра 

Измерения получаются путем считывания значений из 14 регистров, начиная с OUT\+\_\+\+TEMP\+\_\+L и преобразованием значений АЦП в мс/c, градусы и градусы Цельсия. 
\begin{DoxyParams}{Аргументы}
{\em a} & Массив, куда записываются значения ускорений по трем осям \\
\hline
{\em g} & Массив, куда записываются значений угла отклонения по трем осям \\
\hline
{\em t} & Переменная, куда записывается значение температуры в градусах Цельсиях \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после снятия измерений. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Сохраняем в массив uint16\+\_\+t. Таким образом избегаем объединения uint8\+\_\+t в uint16\+\_\+t\Hypertarget{group___l_s_m6_d_s33__group_gabb8047f0a55832252a0d0ef41f748fd6}\label{group___l_s_m6_d_s33__group_gabb8047f0a55832252a0d0ef41f748fd6} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_get\_measure@{LSM6DS33\_get\_measure}}
\index{LSM6DS33\_get\_measure@{LSM6DS33\_get\_measure}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_get\_measure()}{LSM6DS33\_get\_measure()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+get\+\_\+measure (\begin{DoxyParamCaption}\item[{float \texorpdfstring{$\ast$}{*}}]{a,  }\item[{float \texorpdfstring{$\ast$}{*}}]{g }\end{DoxyParamCaption})}



Снятие измерений акселерометра и гирокскопа 

Измерениия получаются путем считывания значений из 12 регистров, начиная с OUTX\+\_\+\+L\+\_\+G и преобразованием значений АЦП в мс/с и градусы. 
\begin{DoxyParams}{Аргументы}
{\em a} & Массив, куда записываются значения ускорений по трем осям \\
\hline
{\em g} & Массив, куда записываются значений угла отклонения по трем осям \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после снятия измерений. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Сохраняем в массив uint16\+\_\+t. Таким образом избегаем объединения uint8\+\_\+t в uint16\+\_\+t\Hypertarget{group___l_s_m6_d_s33__group_ga65f8d51906bfa63994613f24fe265bbc}\label{group___l_s_m6_d_s33__group_ga65f8d51906bfa63994613f24fe265bbc} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_init@{LSM6DS33\_init}}
\index{LSM6DS33\_init@{LSM6DS33\_init}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_init()}{LSM6DS33\_init()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+init (\begin{DoxyParamCaption}\item[{I2\+C\+\_\+\+Handle\+Type\+Def}]{hi2c\+\_\+ }\end{DoxyParamCaption})}



Инициализация датчика LSM6\+DS33. 

Функция вызывается перед конфигурацией и измерением данных датчиком. В ней проверяется ID датчика и загружается стандартная конфигурация. 
\begin{DoxyParams}{Аргументы}
{\em hi2c\+\_\+} & Экземпляр I2\+C\+\_\+\+Type\+Def, к которому подключен датчик. \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после инициализации датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Если считанный ID соответствует ID датчика, устанавливаем стандартную конфигурацию\Hypertarget{group___l_s_m6_d_s33__group_ga0c2dbc5fb28f8dfb76e5b1597b579941}\label{group___l_s_m6_d_s33__group_ga0c2dbc5fb28f8dfb76e5b1597b579941} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_reset@{LSM6DS33\_reset}}
\index{LSM6DS33\_reset@{LSM6DS33\_reset}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_reset()}{LSM6DS33\_reset()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Програмнная перезагрузка датчика 

Выполняется записью 1 в бит SW\+\_\+\+RESET в регистр CTRL3\+\_\+C 
\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после сброса датчика. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
\Hypertarget{group___l_s_m6_d_s33__group_ga42146df5bea93f539fe623653f301fab}\label{group___l_s_m6_d_s33__group_ga42146df5bea93f539fe623653f301fab} 
\index{LSM6DS33@{LSM6DS33}!LSM6DS33\_T\_get\_measure@{LSM6DS33\_T\_get\_measure}}
\index{LSM6DS33\_T\_get\_measure@{LSM6DS33\_T\_get\_measure}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{LSM6DS33\_T\_get\_measure()}{LSM6DS33\_T\_get\_measure()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LSM6\+DS33\+\_\+\+T\+\_\+get\+\_\+measure (\begin{DoxyParamCaption}\item[{float \texorpdfstring{$\ast$}{*}}]{t }\end{DoxyParamCaption})}



Снятие измерений термометра 

Измерения получаются путем считывания значений из регистров OUT\+\_\+\+TEMP\+\_\+L и OUT\+\_\+\+TEMP и преобразование значений АЦП в градусы Цельсия. 
\begin{DoxyParams}{Аргументы}
{\em t} & Переменная, куда записывается значение температуры в градусах Цельсиях \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Статус I2C после снятия измерений. Может быть {\bfseries{HAL\+\_\+\+OK}}, {\bfseries{HAL\+\_\+\+ERROR}}, {\bfseries{HAL\+\_\+\+BUSY}} \\
\hline
\end{DoxyRetVals}
Сохраняем в массив uint16\+\_\+t. Таким образом избегаем объединения uint8\+\_\+t в uint16\+\_\+t

\doxysubsection{Переменные}
\Hypertarget{group___l_s_m6_d_s33__group_ga3e9d93f01df7b25d2b02c252ec86b739}\label{group___l_s_m6_d_s33__group_ga3e9d93f01df7b25d2b02c252ec86b739} 
\index{LSM6DS33@{LSM6DS33}!FULL\_SCALES\_A@{FULL\_SCALES\_A}}
\index{FULL\_SCALES\_A@{FULL\_SCALES\_A}!LSM6DS33@{LSM6DS33}}
\doxysubsubsection{\texorpdfstring{FULL\_SCALES\_A}{FULL\_SCALES\_A}}
{\footnotesize\ttfamily uint16\+\_\+t FULL\+\_\+\+SCALES\+\_\+A\mbox{[}4\mbox{]}\hspace{0.3cm}{\ttfamily [extern]}}



Хранит значения full-\/scale для акселерометра. Упрощает перевод из попугаев в слонов 

Хранит значения full-\/scale для акселерометра. Упрощает перевод из попугаев в слонов \input{group___l_s_m6_d_s33___o_d_r}
\input{group___l_s_m6_d_s33___o_r_i_e_n_t}
\input{group___l_s_m6_d_s33___o_r_i_e_n_t___s_i_g_n}
\input{group___l_s_m6_d_s33___g_y_r_o___h_p_f}
\input{group___l_s_m6_d_s33___a___f_i_l_t_e_r}
\input{group___l_s_m5_d_s33___f_u_l_l___s_c_a_l_e___a}
\input{group___l_s_m6_d_s33___f_u_l_l___s_c_a_l_e___g}
\input{group___l_s_m5_d_s33___r_e_g___a_d_r}
