\doxysection{Файл LSM6\+DS33/\+LSM6\+DS33.h}
\hypertarget{_l_s_m6_d_s33_8h}{}\label{_l_s_m6_d_s33_8h}\index{LSM6DS33/LSM6DS33.h@{LSM6DS33/LSM6DS33.h}}


Файл обеспечивает работу датчика LSM6\+DS33, подключенному к микроконтроллеру STM32\+F103 или STM32\+F411 по I2C.  


{\ttfamily \#include "{}main.\+h"{}}\newline
\doxysubsubsection*{Структуры данных}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_l_s_m6_d_s33__cfg}{LSM6\+DS33\+\_\+cfg}}
\begin{DoxyCompactList}\small\item\em Конфигурация датчика \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries SA0}
\begin{DoxyCompactList}\small\item\em Закомментируйте, если на пине SA0 выставлен RESET. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ADDRESS}~0x\+D7
\begin{DoxyCompactList}\small\item\em Адрес датчика при низком уровне пина SA0. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+\+MASK}~0b11110000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+\+POWER\+\_\+\+DOWN}~0b0000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+12\+\_\+5\+HZ}~0b0001
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+26\+HZ}~0b0010
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+52\+HZ}~0b0011
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+104\+HZ}~0b0100
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+208\+HZ}~0b0101
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+416\+HZ}~0b0110
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+833\+HZ}~0b0111
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+1660\+HZ}~0b1000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+3330\+HZ}~0b1001
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ODR\+\_\+6660\+HZ}~0b1010
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+MASK}~0b00111111
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+XYZ}~0b000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+XZY}~0b001
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+YXZ}~0b010
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+YZX}~0b011
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+ZXY}~0b100
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+CFG\+\_\+\+ZYX}~0b101
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+POSITIVE\+\_\+X}~0b0$<$$<$2
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+NEGATIVE\+\_\+X}~0b1$<$$<$2
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+POSITIVE\+\_\+Y}~0b0$<$$<$1
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+NEGATIVE\+\_\+Y}~0b1$<$$<$1
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+POSITIVE\+\_\+Z}~0b0
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+ORIENT\+\_\+\+SIGN\+\_\+\+NEGATIVE\+\_\+Z}~0b1
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+MASK}~0b01110000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+OFF}~0b0
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+ON}~0b1
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+FREQ\+\_\+1}~0b00
\begin{DoxyCompactList}\small\item\em Частота фильтра 0.\+0081 Гц \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+FREQ\+\_\+2}~0b01
\begin{DoxyCompactList}\small\item\em Частота фильтра 0.\+0324 Гц \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+FREQ\+\_\+3}~0b00
\begin{DoxyCompactList}\small\item\em Частота фильтра 2.\+07 Гц \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+GYRO\+\_\+\+HPF\+\_\+\+FREQ\+\_\+4}~0b01
\begin{DoxyCompactList}\small\item\em Частота фильтра 16.\+32 Гц \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+A\+\_\+\+FILTER\+\_\+\+MASK}~0b01100000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+A\+\_\+\+FILTER\+\_\+\+MODE\+\_\+1}~0b00
\begin{DoxyCompactList}\small\item\em Применяется фильтр Slope. Частота ODR\+\_\+\+XL/50. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+A\+\_\+\+FILTER\+\_\+\+MODE\+\_\+2}~0b01
\begin{DoxyCompactList}\small\item\em Применяется фильтр HPF. Частота ODR\+\_\+\+XL/100. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+A\+\_\+\+FILTER\+\_\+\+MODE\+\_\+3}~0b10
\begin{DoxyCompactList}\small\item\em Применяется фильтр HPF. Частота ODR\+\_\+\+XL/9. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+A\+\_\+\+FILTER\+\_\+\+MODE\+\_\+4}~0b11
\begin{DoxyCompactList}\small\item\em Применяется фильтр HPF. Частота ODR\+\_\+\+XL/400. \end{DoxyCompactList}\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+\+MASK}~0b00001100
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+2G}~0b00
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+4G}~0b10
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+8G}~0b11
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+16G}~0b01
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+250\+DPS}~0b000
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+500\+DPS}~0b001
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+1000\+DPS}~0b010
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+FULL\+\_\+\+SCALE\+\_\+2000\+DPS}~0b011
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+CTRL1}~0x10
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+CTRL2}~0x11
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+CTRL3}~0x12
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+CTRL7}~0x16
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+CTRL8}~0x17
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+ORIENT\+\_\+\+CFG}~0x0B
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+STATUS\+\_\+\+REG}~0x1E
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+OUT\+\_\+T}~0x20
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+OUT\+\_\+G}~0x22
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+OUT\+\_\+A}~0x28
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+REGISTER\+\_\+\+ID}~0x0F
\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Макрос определения используемой библиотеки}\par
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries LSM6\+DS33\+\_\+\+HAL}
\begin{DoxyCompactList}\small\item\em Указывает библиотеку STM32, с помощью которой управляется интерфейс I2C. Определите {\bfseries{LSM6\+DS33\+\_\+\+HAL}} или {\bfseries{LSM6\+DS33\+\_\+\+LL}} в зависимости от используемой библиотеки. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___l_s_m6_d_s33__group_gae6b392cec4944416801eabf7f95d13b2}{\+\_\+\+\_\+\+LSM6\+DS33\+\_\+modify\+\_\+reg}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}reg\+\_\+data, uint8\+\_\+t mask, uint8\+\_\+t bits)
\begin{DoxyCompactList}\small\item\em Вспомогательная функция для изменения бита в байте \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga65f8d51906bfa63994613f24fe265bbc}{LSM6\+DS33\+\_\+init}} (I2\+C\+\_\+\+Handle\+Type\+Def hi2c\+\_\+)
\begin{DoxyCompactList}\small\item\em Инициализация датчика LSM6\+DS33. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gab790d028306b8e65cb6bd0fea470488d}{LSM6\+DS33\+\_\+config\+\_\+orientation}} (uint8\+\_\+t orient, uint8\+\_\+t signs)
\begin{DoxyCompactList}\small\item\em Конфигурация ориентации датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gafa5498ca334e09daeff33bbe17cc1849}{LSM6\+DS33\+\_\+config\+\_\+filters}} (uint8\+\_\+t g\+\_\+\+HPF, uint8\+\_\+t g\+\_\+\+HPF\+\_\+frequency, uint8\+\_\+t a\+\_\+\+HPF)
\begin{DoxyCompactList}\small\item\em Конфигурация HPF фильтров акселерометра и гироскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gac340e8eb67ec4c3935ac5f9d21702689}{LSM6\+DS33\+\_\+config\+\_\+full\+\_\+scale}} (uint8\+\_\+t a\+\_\+\+FS, uint8\+\_\+t g\+\_\+\+FS)
\begin{DoxyCompactList}\small\item\em Конфигурация full-\/scale для гироскопа и акселерометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga68e56747e6553e229a8bb64a2adeae7d}{LSM6\+DS33\+\_\+config\+\_\+perfomance\+\_\+mode}} (uint8\+\_\+t a\+\_\+\+ODR, uint8\+\_\+t g\+\_\+\+ODR)
\begin{DoxyCompactList}\small\item\em Конфигурация режима работы датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga0c2dbc5fb28f8dfb76e5b1597b579941}{LSM6\+DS33\+\_\+reset}} ()
\begin{DoxyCompactList}\small\item\em Програмнная перезагрузка датчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gac3a6604c07a62dda0c338d382a0209cd}{LSM6\+DS33\+\_\+\+A\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga7f266a11c1106c6c7774e961ad3ddcd8}{LSM6\+DS33\+\_\+\+G\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}g)
\begin{DoxyCompactList}\small\item\em Снятие измерений гироскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga42146df5bea93f539fe623653f301fab}{LSM6\+DS33\+\_\+\+T\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}t)
\begin{DoxyCompactList}\small\item\em Снятие измерений термометра \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_gabb8047f0a55832252a0d0ef41f748fd6}{LSM6\+DS33\+\_\+get\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a, float \texorpdfstring{$\ast$}{*}g)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра и гирокскопа \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga11b009252026358585a88ddcf0703794}{LSM6\+DS33\+\_\+get\+\_\+all\+\_\+measure}} (float \texorpdfstring{$\ast$}{*}a, float \texorpdfstring{$\ast$}{*}g, float \texorpdfstring{$\ast$}{*}t)
\begin{DoxyCompactList}\small\item\em Снятие измерений акселерометра, гирокскопа и термометра \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Переменные}
\begin{DoxyCompactItemize}
\item 
I2\+C\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*} {\bfseries LSM6\+DS33\+\_\+hi2c}
\begin{DoxyCompactList}\small\item\em Экземпляр I2C, к которому подключен датчиик влажности. Тип экземпляра зависит от библиотеки. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{group___l_s_m6_d_s33__group_ga3e9d93f01df7b25d2b02c252ec86b739}{FULL\+\_\+\+SCALES\+\_\+A}} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Хранит значения full-\/scale для акселерометра. Упрощает перевод из попугаев в слонов \end{DoxyCompactList}\item 
uint16\+\_\+t {\bfseries FULL\+\_\+\+SCALES\+\_\+G} \mbox{[}4\mbox{]}
\begin{DoxyCompactList}\small\item\em Хранит значения full-\/scale для гироскопа. Упрощает перевод из попугаев в слонов \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Файл обеспечивает работу датчика LSM6\+DS33, подключенному к микроконтроллеру STM32\+F103 или STM32\+F411 по I2C. 

\begin{DoxyAuthor}{Автор}
Рафаэль Абельдинов 
\end{DoxyAuthor}
\begin{DoxyDate}{Дата}
19.\+12.\+2023 
\end{DoxyDate}
