\doxysection{Файл E22400\+M30\+S/\+SX1268.h}
\hypertarget{_s_x1268_8h}{}\label{_s_x1268_8h}\index{E22400M30S/SX1268.h@{E22400M30S/SX1268.h}}


Файл обеспечивает передачу данных с помощью стандарта Lo\+Ra приемопередатчика SX1268, подключенному по SPI.  


{\ttfamily \#include "{}main.\+h"{}}\newline
\doxysubsubsection*{Макросы}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+STANDBY}~0x80
\begin{DoxyCompactList}\small\item\em Команда перехода в состояние ожидания \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+TX}~0x83
\begin{DoxyCompactList}\small\item\em Команда перехода в состояние отправки данных \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+RX}~0x82
\begin{DoxyCompactList}\small\item\em Команда перехода в состояние приема данных \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+SLEEP}~0x84
\begin{DoxyCompactList}\small\item\em Команда перехода в состояние сна \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+CALIBRATE}~0x89
\begin{DoxyCompactList}\small\item\em Команда калбировки приемопередатчика \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+WRITE\+\_\+\+REGISTER}~0x0D
\begin{DoxyCompactList}\small\item\em Команда записи данных в регистр \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+READ\+\_\+\+REGISTER}~0x1D
\begin{DoxyCompactList}\small\item\em Команда чтения данных из регистра \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+WRITE\+\_\+\+BUFFER}~0x0E
\begin{DoxyCompactList}\small\item\em Команда записи данных в буфер данных приемопередатчика \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+READ\+\_\+\+BUFFER}~0x1E
\begin{DoxyCompactList}\small\item\em Команда чтения данных из буфера данных приемопередатчика \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+RF\+\_\+\+FREQ}~0x86
\begin{DoxyCompactList}\small\item\em Конфигурация радиочастоты приемопередатчика \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+PACKET\+\_\+\+TYPE}~0x8A
\begin{DoxyCompactList}\small\item\em Конфигурация протокола передачи пакетов (GFSK или Lo\+Ra) \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+TX\+\_\+\+PARAMS}~0x8E
\begin{DoxyCompactList}\small\item\em Конфигурация состояния приема данных \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+MODULATION\+\_\+\+PARAMS}~0x8B
\begin{DoxyCompactList}\small\item\em Конфигурация параметров модуляции \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+PACKET\+\_\+\+PARAMS}~0x8C
\begin{DoxyCompactList}\small\item\em Конфигурация параметров пакета \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+OP\+\_\+\+SET\+\_\+\+BUF\+\_\+\+BASE\+\_\+\+ADDR}~0x8F
\begin{DoxyCompactList}\small\item\em Установка адресов на области принятых и отправленных данных в буфере данных приемопередатчика \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+SF5}~0x05
\item 
\#define {\bfseries SX1268\+\_\+\+SF6}~0x06
\item 
\#define {\bfseries SX1268\+\_\+\+SF7}~0x07
\item 
\#define {\bfseries SX1268\+\_\+\+SF8}~0x08
\item 
\#define {\bfseries SX1268\+\_\+\+SF9}~0x09
\item 
\#define {\bfseries SX1268\+\_\+\+SF10}~0x0A
\item 
\#define {\bfseries SX1268\+\_\+\+SF11}~0x0B
\item 
\#define {\bfseries SX1268\+\_\+\+SF12}~0x0C
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+7}~0x00
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+10}~0x08
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+15}~0x01
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+20}~0x09
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+31}~0x02
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+41}~0x0A
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+62}~0x03
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+125}~0x04
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+250}~0x05
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+BW\+\_\+500}~0x06
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+CR\+\_\+4\+\_\+5}~0x01
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+CR\+\_\+4\+\_\+6}~0x02
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+CR\+\_\+4\+\_\+7}~0x03
\item 
\#define {\bfseries SX1268\+\_\+\+LORA\+\_\+\+CR\+\_\+4\+\_\+8}~0x04
\item 
\#define {\bfseries SX1268\+\_\+\+LDRO\+\_\+\+OFF}~0x00
\item 
\#define {\bfseries SX1268\+\_\+\+LDRO\+\_\+\+ON}~0x01
\item 
\#define {\bfseries SX1268\+\_\+\+PREAMBLE\+\_\+\+EXPLICIT}~0x00
\begin{DoxyCompactList}\small\item\em Пакеты отправляются явным образом \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+PREAMBLE\+\_\+\+IMPLICIT}~0x01
\begin{DoxyCompactList}\small\item\em Пакеты отправляются неявным образом \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+CRC\+\_\+\+OFF}~0x00
\begin{DoxyCompactList}\small\item\em Отключение проверки контрольной суммы пакеты \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+CRC\+\_\+\+ON}~0x01
\begin{DoxyCompactList}\small\item\em Включение проверки контрольной суммы пакета \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+STANDART\+\_\+\+IQ}~0x00
\begin{DoxyCompactList}\small\item\em ?? \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+INVERT\+\_\+\+IQ}~0x01
\begin{DoxyCompactList}\small\item\em ?? \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+PACKET\+\_\+\+TYPE\+\_\+\+LORA}~0x01
\begin{DoxyCompactList}\small\item\em В данном модуле пристуствует только протокол Lo\+Ra. \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+10U}~0x00
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+20U}~0x01
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+40U}~0x02
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+80U}~0x03
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+200U}~0x04
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+800U}~0x05
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+1700U}~0x06
\item 
\#define {\bfseries SX1268\+\_\+\+SET\+\_\+\+RAMP\+\_\+3400U}~0x07
\item 
\#define {\bfseries SX1268\+\_\+\+RX\+\_\+\+GAIN\+\_\+\+REGISTER}~0x08\+AC
\begin{DoxyCompactList}\small\item\em Адрес регистра режима получения данных приемопередатчиком \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+RX\+\_\+\+POWER\+\_\+\+SAVING\+\_\+\+GAIN\+\_\+\+MODE}~0x94
\begin{DoxyCompactList}\small\item\em Режим сбережения энергии и пониженной чувствительности \end{DoxyCompactList}\item 
\#define {\bfseries SX1268\+\_\+\+RX\+\_\+\+BOOSTED\+\_\+\+GAIN\+\_\+\+MODE}~0x96
\begin{DoxyCompactList}\small\item\em Режим повышенного потребления энергии и высокой чувствительности \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Макрос для определения испольуземой библиотеки}\par
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries SX1268\+\_\+\+HAL}
\begin{DoxyCompactList}\small\item\em Указывает библиотеку STM32, с помощью которой управляется интерфейс SPI. Определите {\bfseries{SX1268\+\_\+\+HAL}} или {\bfseries{SX1268\+\_\+\+LL}} для соотвествующей библиотеки. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___s_x1268__group_ga2db4fc6028dc6a16d5a2d8a52a36d472}{SX1268\+\_\+init}} (SPI\+\_\+\+Handle\+Type\+Def hspi\+\_\+)
\begin{DoxyCompactList}\small\item\em Инициализация приемопередатчик \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_x1268__group_ga93858131efff38ea11b1cf85785c12c4}{SX1268\+\_\+config\+\_\+rf\+Freq}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}rf\+Freq)
\begin{DoxyCompactList}\small\item\em Конфигурация радиочастоты приемопередатчика \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_x1268__group_gad23c91801dd2c8c5c9a095d7557ed3a0}{SX1268\+\_\+config\+\_\+modulation\+\_\+params}} (uint8\+\_\+t SF, uint8\+\_\+t BW, uint8\+\_\+t CR, uint8\+\_\+t LDRO)
\begin{DoxyCompactList}\small\item\em Конфигурация параметров модуляции протокола Lo\+Ra. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_x1268__group_ga5e88f8f2ca84b2063cf6b0df5718469a}{SX1268\+\_\+config\+\_\+base\+Addr}} (uint8\+\_\+t Tx\+Addr, uint8\+\_\+t Rx\+Addr)
\begin{DoxyCompactList}\small\item\em Определение указателя на принимаемые и отправляемые данные в буфере данных SX1268. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status \mbox{\hyperlink{group___s_x1268__group_ga099eba8949d84aeed2b66afc285c69c2}{SX1268\+\_\+config\+\_\+tx\+\_\+params}} (uint8\+\_\+t power, unit8\+\_\+t ramp\+Time)
\begin{DoxyCompactList}\small\item\em Конфигурация мощности сигнала и ramping time для радиопередатчика в режиме TX. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_x1268__group_ga80d1e5f8d206b0bd23545f45cc27f36c}{SX1268\+\_\+config\+\_\+packet\+\_\+params}} (uint16\+\_\+t preamble\+\_\+length, uint8\+\_\+t header\+\_\+type, uint8\+\_\+t payload\+\_\+length, uint8\+\_\+t CRC, uint8\+\_\+t invert\+\_\+\+IQ)
\begin{DoxyCompactList}\small\item\em Конфигурация параметров пакетов \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_x1268__group_ga646506d53a9a04b46d69136160941cb4}{SX1268\+\_\+send\+\_\+message}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}buffer, int buffer\+\_\+size)
\end{DoxyCompactItemize}
\doxysubsubsection*{Переменные}
\begin{DoxyCompactItemize}
\item 
SPI\+\_\+\+Type\+Def {\bfseries SX1268\+\_\+hspi}
\begin{DoxyCompactList}\small\item\em Экземпляр SPI, к которому подключен модуль \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Файл обеспечивает передачу данных с помощью стандарта Lo\+Ra приемопередатчика SX1268, подключенному по SPI. 

\begin{DoxyAuthor}{Автор}
Рафаэль Абельдинов 
\end{DoxyAuthor}
\begin{DoxyDate}{Дата}
12.\+01.\+2024 
\end{DoxyDate}
