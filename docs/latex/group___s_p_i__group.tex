\doxysection{SPI LL}
\hypertarget{group___s_p_i__group}{}\label{group___s_p_i__group}\index{SPI LL@{SPI LL}}


Модуль SPI для микроконтроллера F103. Подключается для работы модулей на библиотеке LL.  


\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_p_i__group_ga2482d28ec89e3ba371752209e0c3cda5}{SPI\+\_\+\+\_\+wait\+\_\+flag}} (SPI\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}SPIx, uint8\+\_\+t bit, uint8\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Дополнительная внутрянняя функция для отлова ошибок в SPI. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_p_i__group_gad815858180faf43e58ae6752ec58ae80}{LL\+\_\+\+SPI\+\_\+\+Transmit}} (SPI\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}SPIx, uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint8\+\_\+t bytes\+\_\+count, uint8\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Отправка байтов по шине SPI. \end{DoxyCompactList}\item 
HAL\+\_\+\+Status\+Type\+Def \mbox{\hyperlink{group___s_p_i__group_ga46a5f522fe8d9a68ae4789754f6477be}{LL\+\_\+\+SPI\+\_\+\+Receive}} (SPI \texorpdfstring{$\ast$}{*}SPIx, uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}buffer, uint8\+\_\+t bytes\+\_\+count, uint8\+\_\+t timeout)
\begin{DoxyCompactList}\small\item\em Прием байтов с шины SPI. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Модуль SPI для микроконтроллера F103. Подключается для работы модулей на библиотеке LL. 

Обеспечивает передачу данных устройству, подключенному к микроконтроллеру по SPI 

\doxysubsection{Функции}
\Hypertarget{group___s_p_i__group_ga46a5f522fe8d9a68ae4789754f6477be}\label{group___s_p_i__group_ga46a5f522fe8d9a68ae4789754f6477be} 
\index{SPI LL@{SPI LL}!LL\_SPI\_Receive@{LL\_SPI\_Receive}}
\index{LL\_SPI\_Receive@{LL\_SPI\_Receive}!SPI LL@{SPI LL}}
\doxysubsubsection{\texorpdfstring{LL\_SPI\_Receive()}{LL\_SPI\_Receive()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LL\+\_\+\+SPI\+\_\+\+Receive (\begin{DoxyParamCaption}\item[{SPI \texorpdfstring{$\ast$}{*}}]{SPIx,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{uint8\+\_\+t}]{bytes\+\_\+count,  }\item[{uint8\+\_\+t}]{timeout }\end{DoxyParamCaption})}



Прием байтов с шины SPI. 


\begin{DoxyParams}{Аргументы}
{\em SPIx} & SPI, с которого отправляются данные \\
\hline
{\em buffer} & Указатель на буффер данных, куда записываются данные. Указатель нужен для изменения переданного буффера \\
\hline
{\em bytes\+\_\+count} & Размер буффера в байтах \\
\hline
{\em timeout} & Время ожидания изменения какого либо флага во время приема данных \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Результат приема данных. Может быть
\begin{DoxyItemize}
\item {\bfseries{HAL\+\_\+\+BUSY}} -\/ если по истечении времени шина осталась занятой
\item {\bfseries{HAL\+\_\+\+ERROR}} -\/ если по истечении времени флаг не изменился на указанный
\end{DoxyItemize}\\
\hline
\end{DoxyRetVals}

\begin{DoxyItemize}
\item {\bfseries{HAL\+\_\+\+OK}} -\/ в остальных случаях 
\end{DoxyItemize}\texorpdfstring{$<$}{<} Проверка, занят ли SPI

\texorpdfstring{$<$}{<} Ждем пока данные поступят в сдвиговый регистр

\texorpdfstring{$<$}{<} Записываем данные

\texorpdfstring{$<$}{<} Ждем пока прием закончится\Hypertarget{group___s_p_i__group_gad815858180faf43e58ae6752ec58ae80}\label{group___s_p_i__group_gad815858180faf43e58ae6752ec58ae80} 
\index{SPI LL@{SPI LL}!LL\_SPI\_Transmit@{LL\_SPI\_Transmit}}
\index{LL\_SPI\_Transmit@{LL\_SPI\_Transmit}!SPI LL@{SPI LL}}
\doxysubsubsection{\texorpdfstring{LL\_SPI\_Transmit()}{LL\_SPI\_Transmit()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def LL\+\_\+\+SPI\+\_\+\+Transmit (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}}]{SPIx,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data,  }\item[{uint8\+\_\+t}]{bytes\+\_\+count,  }\item[{uint8\+\_\+t}]{timeout }\end{DoxyParamCaption})}



Отправка байтов по шине SPI. 


\begin{DoxyParams}{Аргументы}
{\em SPIx} & SPI, на который отправляются данные \\
\hline
{\em data} & Буфер отправляемых данных \\
\hline
{\em bytes\+\_\+count} & Размер буфера в байтах \\
\hline
{\em timeout} & Время ожидания изменения какого либо флага во время передачи данных \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Результат отправки данных. Может быть
\begin{DoxyItemize}
\item {\bfseries{HAL\+\_\+\+BUSY}} -\/ если по истечении времени шина осталась занятой
\item {\bfseries{HAL\+\_\+\+ERROR}} -\/ если по истечении времени флаг не изменился на указанный
\end{DoxyItemize}\\
\hline
\end{DoxyRetVals}

\begin{DoxyItemize}
\item {\bfseries{HAL\+\_\+\+OK}} -\/ в остальных случаях 
\end{DoxyItemize}\texorpdfstring{$<$}{<} Ждем пока сдвиговый регистр освободится

\texorpdfstring{$<$}{<} Помещаем в него данные буфера

\texorpdfstring{$<$}{<} Ждем пока передача закончится\Hypertarget{group___s_p_i__group_ga2482d28ec89e3ba371752209e0c3cda5}\label{group___s_p_i__group_ga2482d28ec89e3ba371752209e0c3cda5} 
\index{SPI LL@{SPI LL}!SPI\_\_wait\_flag@{SPI\_\_wait\_flag}}
\index{SPI\_\_wait\_flag@{SPI\_\_wait\_flag}!SPI LL@{SPI LL}}
\doxysubsubsection{\texorpdfstring{SPI\_\_wait\_flag()}{SPI\_\_wait\_flag()}}
{\footnotesize\ttfamily HAL\+\_\+\+Status\+Type\+Def SPI\+\_\+\+\_\+wait\+\_\+flag (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}}]{SPIx,  }\item[{uint8\+\_\+t}]{bit,  }\item[{uint8\+\_\+t}]{timeout }\end{DoxyParamCaption})}



Дополнительная внутрянняя функция для отлова ошибок в SPI. 


\begin{DoxyParams}{Аргументы}
{\em SPIx} & SPI, для которого была вызвана функция для отправки или приема данных \\
\hline
{\em бит} & регистра SR, значение которого проверяется \\
\hline
{\em timeout} & Время ожидания получения необходимого значения бита \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & Результат проверки бита I2C. Может быть
\begin{DoxyItemize}
\item {\bfseries{HAL\+\_\+\+BUSY}} -\/ если по истечении времени шина осталась занятой
\item {\bfseries{HAL\+\_\+\+ERROR}} -\/ если по истечении времени флаг не изменился на указанный
\item {\bfseries{HAL\+\_\+\+OK}} -\/ в остальных случаях ~\newline
 
\end{DoxyItemize}\\
\hline
\end{DoxyRetVals}
\texorpdfstring{$<$}{<} uw\+Tick -\/ миллисекунды, считываемые внутренним таймером МК

\texorpdfstring{$<$}{<} Ждем пока значение бита не изменится на значение bit

\texorpdfstring{$<$}{<} Если не изменилось за timeout мс, возвращаем статус SPI