\doxysection{GPS parser}
\hypertarget{group___parser__group}{}\label{group___parser__group}\index{GPS parser@{GPS parser}}


Модуль парсера NMEA сообщений  


\doxysubsubsection*{Структуры данных}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_g_g_a__data}{GGA\+\_\+data}}
\begin{DoxyCompactList}\small\item\em Структура для хранения данных сообщения GGA. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{struct_v_t_g__data}{VTG\+\_\+data}}
\begin{DoxyCompactList}\small\item\em Структура для хранения данных сообщения VTG. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Функции}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___parser__group_gaed6d05ccd1a8ded6cca6aac6d43fe78a}{\+\_\+\+\_\+insert}} (char \texorpdfstring{$\ast$}{*}\&dest, char source, int pos)
\begin{DoxyCompactList}\small\item\em Вставка символа в строку на указанную позицию \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group___parser__group_gaee803d47574fa687c060137c427808e0}{\+\_\+\+\_\+checksum}} (char \texorpdfstring{$\ast$}{*}\&buffer)
\begin{DoxyCompactList}\small\item\em Проверки контрольной суммы \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___parser__group_gaf716e1c325603f9948abf59c425c0bbc}{\+\_\+\+\_\+line\+\_\+process}} (char \texorpdfstring{$\ast$}{*}\&buffer)
\begin{DoxyCompactList}\small\item\em Обработка строки \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group___parser__group_ga31444af23d45a9d25543c4629f9b0836}{parse}} (char \texorpdfstring{$\ast$}{*}buffer)
\begin{DoxyCompactList}\small\item\em Извлечение данных из NMEA сообщения \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Переменные}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{group___parser__group_ga29f97c4df870aa36f0c8cfc86e37e014}\label{group___parser__group_ga29f97c4df870aa36f0c8cfc86e37e014} 
\mbox{\hyperlink{struct_g_g_a__data}{GGA\+\_\+data}} {\bfseries GGA}
\begin{DoxyCompactList}\small\item\em Хранит данные из последнего сообщения GGA. \end{DoxyCompactList}\item 
\Hypertarget{group___parser__group_gac8dc68bedba1457f3f22e7e1d31bbc0e}\label{group___parser__group_gac8dc68bedba1457f3f22e7e1d31bbc0e} 
\mbox{\hyperlink{struct_v_t_g__data}{VTG\+\_\+data}} {\bfseries VTG}
\begin{DoxyCompactList}\small\item\em Хранит данные из последнего сообщения VTG. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Подробное описание}
Модуль парсера NMEA сообщений 

Предполагается использование модуля на ПК, а не на МК. Модуль позволяет извлекать данные из NMEA сообщений типа GGA и VTG в формате "{}hh\+:mm\+:ss  \$\+GPxxx,x,x,x,x,x,x,x\texorpdfstring{$\ast$}{*}xx"{}. Пример использования кода 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{char}*\ buffer\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{char}[256];}
\DoxyCodeLine{strcpy(buffer,\ \textcolor{stringliteral}{"{}14:05:35\ \ \$GPGGA,140535.00,5312.77775,N,05010.72429,E,1,05,8.77,153.0,M,-\/6.4,M,,*41"{}});}
\DoxyCodeLine{\mbox{\hyperlink{group___parser__group_ga31444af23d45a9d25543c4629f9b0836}{parse}}(buffer);}

\end{DoxyCode}
~\newline
 

\doxysubsection{Функции}
\Hypertarget{group___parser__group_gaee803d47574fa687c060137c427808e0}\label{group___parser__group_gaee803d47574fa687c060137c427808e0} 
\index{GPS parser@{GPS parser}!\_\_checksum@{\_\_checksum}}
\index{\_\_checksum@{\_\_checksum}!GPS parser@{GPS parser}}
\doxysubsubsection{\texorpdfstring{\_\_checksum()}{\_\_checksum()}}
{\footnotesize\ttfamily int \+\_\+\+\_\+checksum (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}\&}]{buffer }\end{DoxyParamCaption})}



Проверки контрольной суммы 

Контрольная сумма вычисляется вычислением XOR с каждым байтом сообщения NMEA 
\begin{DoxyParams}{Аргументы}
{\em buffer} & Строка, для которой необходимо вычислить контрольную сумму \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & -\/ 1, если контрольная сумма совпала
\begin{DoxyItemize}
\item 0, если контрольная сумма не совпала 
\end{DoxyItemize}\\
\hline
\end{DoxyRetVals}
\Hypertarget{group___parser__group_gaed6d05ccd1a8ded6cca6aac6d43fe78a}\label{group___parser__group_gaed6d05ccd1a8ded6cca6aac6d43fe78a} 
\index{GPS parser@{GPS parser}!\_\_insert@{\_\_insert}}
\index{\_\_insert@{\_\_insert}!GPS parser@{GPS parser}}
\doxysubsubsection{\texorpdfstring{\_\_insert()}{\_\_insert()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+insert (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}\&}]{dest,  }\item[{char}]{source,  }\item[{int}]{pos }\end{DoxyParamCaption})}



Вставка символа в строку на указанную позицию 


\begin{DoxyParams}{Аргументы}
{\em dest} & Строка, куда вставляется символ \\
\hline
{\em source} & символ, который вставляется в строку \\
\hline
{\em pos} & Позиция, на которую вставляется символ в строку \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em dest} & Строка dest со вставленным символом \\
\hline
\end{DoxyRetVals}
\Hypertarget{group___parser__group_gaf716e1c325603f9948abf59c425c0bbc}\label{group___parser__group_gaf716e1c325603f9948abf59c425c0bbc} 
\index{GPS parser@{GPS parser}!\_\_line\_process@{\_\_line\_process}}
\index{\_\_line\_process@{\_\_line\_process}!GPS parser@{GPS parser}}
\doxysubsubsection{\texorpdfstring{\_\_line\_process()}{\_\_line\_process()}}
{\footnotesize\ttfamily void \+\_\+\+\_\+line\+\_\+process (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}\&}]{buffer }\end{DoxyParamCaption})}



Обработка строки 

Функция подгоняет строку под шаблон перед извлечением данных. Подгон под шаблон происходит путем заполнения нулями отсутсвующих значений 
\begin{DoxyParams}{Аргументы}
{\em buffer} & Строка, которая подгоняется под шаблон \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em Строка,подогнанная} & под шаблон, т.\+е. со всталеными нулями \\
\hline
\end{DoxyRetVals}
\Hypertarget{group___parser__group_ga31444af23d45a9d25543c4629f9b0836}\label{group___parser__group_ga31444af23d45a9d25543c4629f9b0836} 
\index{GPS parser@{GPS parser}!parse@{parse}}
\index{parse@{parse}!GPS parser@{GPS parser}}
\doxysubsubsection{\texorpdfstring{parse()}{parse()}}
{\footnotesize\ttfamily int parse (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{buffer }\end{DoxyParamCaption})}



Извлечение данных из NMEA сообщения 

Данные извлекаются из строки в структуры GGA и VTG в зависимости от типа сообщения 
\begin{DoxyParams}{Аргументы}
{\em buffer} & Строка, из которой извлекаются данные \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Возвращаемые значения}
{\em status} & -\/ -\/2, если при VTG или GGA неправильно считались данные для сохранения в структуру
\begin{DoxyItemize}
\item -\/1, если не совпала контрольная сумма
\item 0, если переданный тип сообщения не VTG или GGA
\item 1, если данные считались верно для GGA
\item 2, если данные считались верно для VTG 
\end{DoxyItemize}\\
\hline
\end{DoxyRetVals}
